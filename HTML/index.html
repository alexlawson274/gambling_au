<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Scrollama</title>
    <meta name="description" content="Scrollama: Sticky Overlay Example" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <style>
      #scrolly {
        position: relative;
        background-color: #ffffff;
        padding: 1rem;
      }

      body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #000000;
            max-width: 800px;
            margin: 0 auto;
            padding: 10px;
        }

      article {
        position: relative;
        padding: 0;
        max-width: 20rem;
        margin: 0 auto;
      }

      .sticky-thing {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        width: 100%;
        margin: 0;
        background-color: #fdfbfb;
        background-image: url(images/Testing.svg);
        background-repeat: no-repeat;
        background-position: center;
        

        z-index: 0;
        top: 0.5vh;
        height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-image 0.8s ease-in-out;
      }

      .sticky-thing p {
        font-size: 3rem;
        font-weight: 800;
        color: #0c0c0c;
        margin-left: 210px;
        margin-right: 210px;
        text-align: center;
      }

      .step {
        margin: 0 auto 2rem auto;
        margin-bottom: 20rem;
        color: #080808;
      }

      .step:last-child {
        margin-bottom: 0;
      }

      .step.is-active p {
        color: #3b3b3b;
      }

      .step p {
        text-align: center;
        padding: 1rem;
        font-size: 1.2rem;
        background-color:rgba(236, 234, 234, 0.95);
        border-color: #0c0c0c;
       }

     .header {
      font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            font-weight: 800;
            line-height: .5;
            color: #0f0f0f;
            margin-left: 100px ;
          margin-right: 100px; }
        
     .article-title {  
            font-family: 'Times New Roman', serif;
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 2px;
            margin-left: 80px;
            margin-right: 80px;
          }
    .sub-title {
            font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            font-weight: 500;
            line-height: 1.1;
            margin-bottom: 20px;
            margin-left:80px;
            margin-right:80px;
            color: #444444;
        }
      .opening-line {
        font-size: 1.2rem;
        font-weight: 500;
        color: #0c0c0c;
        text-align: center;
        margin-top: 250px;
        margin-bottom: 110px; }

      .underline-red {
        background-color: #ff00004d; 
        padding: 0.1em 0.2em; 
        border-radius: 3px; 
      }

      .svg-container {
        display: flex;
        justify-content: center; 
        align-items: center;     
        height: 60vh;   
        margin-bottom: 120px;       
        }

        .centered-svg {
        height: auto;           
        width: 550px;               
        }
    
        .caption {
            font-size: 0.85rem;
            color: #666;
            line-height: 1;
            margin-left: 90px;
        }
        .article-meta {
            color: #666;
            font-size: 0.9rem;
            margin:110px
        }
        
        .article-content {
            font-size: 1.2rem;
            line-height: 1.7;
        }
        .article-content p {
            margin-bottom: 1.rem;
            margin:110px 
        }
        .outro {
            height: 200px;}
        .graph-header {
          font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            font-weight: 800;
            line-height: .5;
            color: #0f0f0f;
            margin-bottom: 20px;}
    </style>
  </head>

  <body>
    <main>
      <div class="container">

      <section id="scrolly">
        <div class="opening-line">
          <p>Every year Australians spend <b>21 billion dollars</b> on gambling </p>
        </div>
        <div class="sticky-thing">
          <p></p>
        </div>

        <article>
          <div class="step" data-step="" >
            <p>Per capita, that is more money spent on gambling than any other country</p>
          </div>
          <div class="step" data-step=""> 
            <p>But the problem in Australia is not with all gamblers...</p>
          </div>
          <div class="step" data-step=""data-background-image="url(images/testing1.svg)">
            <p>...because the vast majority of the gambling is done by <b><span class="underline-red">"high risk gamblers"</span></b></p>
          </div>
          <div class="step" data-step=""> 
            <p>who make up just 5% of all gamblers.</p>
          </div>
            <section class="outro"></section>
          </div>
        </article>
      </section>
      
      <div class="header">
        <h1 class="article-title">Australia's Problem With Problem Gamblers </h1>
        <h2 class="sub-title">Australia is the largest per-capita gamblers in the world, but policy to deal with the problem is not targeting the root cause</h2></div>
      <div style="text-align: center;">
        <hr>
          <img src="images/gambling_au.jpg" alt="Gambling SVG"  style="max-width: 700px; width: 100%; height: auto;">
        </div>
        <p class="caption">Image: Gambling SVG By Alexander Lawson</p>  </div>
      <div class="article-content">     
          <p>Australians love to gamble. Every year, Australians spend $21 billion placing bets in the hope of winning more. On slot machines (pokies), casino tables, lotteries, and increasingly on sports, Australians gamble more than anyone else in the world. But all this punting will take a toll. According to the World Health Organisation, high amounts of gambling can lead to financial and relationship stress, domestic violence, and in extreme cases, suicide. With gambling revenues at all-time highs, it is policymakers who are looking for ways to reduce the damage. There have been calls to ban gambling advertising during sports and introduce voluntary loss limits on pokie machines. However, these measures are unlikely to succeed in reducing gambling harm unless they target the root cause of the problem: high-risk gamblers.
            These heavy bettors make up just 5% of all gamblers but account for 77% of all money wagered. Even as overall gambling participation declines, these heavy bettors sustain the industry’s revenues.
             </p>
          <div class="svg-container"> <iframe title="" aria-label="Interactive line chart" id="datawrapper-chart-hrfkw" src="https://datawrapper.dwcdn.net/hrfkw/1/" scrolling="no" frameborder="0" style="border: none;" width="370" height="387" data-external="1"></iframe> </div>   
          <div class="svg-container"> <iframe title="" aria-label="Interactive line chart" id="datawrapper-chart-bQybX" src="https://datawrapper.dwcdn.net/bQybX/1/" scrolling="no" frameborder="0" style="border: none;" width="406" height="474" data-external="1"></iframe></div>
          <p>High-risk gamblers bet a lot, and frequently. Whereas a low volume better will gamble an average, of $300, according to a NSW report, a high-risk gambler will bet 43 times that amount (around $13,000), in most cases gambling weekly. The proposals to limit efforts to reduce advertising or access to pokies are likely to be ineffective…
          </p>
          <p> To read the full article, please contact alexlawson274@gmail.com</p>
            </main>

    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama"></script>
    <script>
      var main = document.querySelector("main");
      var scrolly = main.querySelector("#scrolly");
      var sticky = scrolly.querySelector(".sticky-thing");
      var article = scrolly.querySelector("article");
      var steps = article.querySelectorAll(".step");

      // initialize the scrollama
      var scroller = scrollama();

      // scrollama event handlers
      function handleStepEnter(response) {
  var el = response.element;

  steps.forEach(step => step.classList.remove('is-active'));
  el.classList.add('is-active');

  // Update text and background image
  sticky.querySelector("p").innerText = el.dataset.step;
  
  // Get the background image from data attribute
  const bgImage = el.dataset.backgroundImage;
  if (bgImage) {
    sticky.style.backgroundImage = bgImage;
  }
}
      function init() {
       
        scroller
          .setup({
            step: "#scrolly article .step",
            offset: 0.33,
            debug: false
          })
          .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", scroller.resize);
      }

      // kick things off
      init();
    </script>
  </body>
</html>
